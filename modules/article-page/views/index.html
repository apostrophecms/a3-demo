{% import '@apostrophecms/pager:macros.html' as pager with context %}
{% extends "layout.html" %}

{# article index page is full width #}
{% block sideNav %}{% endblock %}

{% block main %}
  <section class="article-index">
    <header class="article-intro">
      <h1>{{ data.page.title }}</h1>
      {% area data.page, 'intro' %}
    </header>
    {% for article in data.pieces %}
      <div class="article-excerpt">
        <h2>
          <a href="{{ article._url }}">{{ article.title }}</a>
        </h2>
        {% if article._topics and article._topics.length > 0 %}
          <ul class="article-topics">
            {% for topic in article._topics %}
              <li>{{ topic.title }}</li>
            {% endfor %}
          </ul>
        {% endif %}
        {% if not apos.area.isEmpty(article, 'blurb') %}
           <p class="article-blurb">{% area article, 'blurb' %}</p>
        {% else %}
          <p class="placeholder">No blurb for this article</p>
        {% endif %}
      </div>
    {% endfor %}
    {{ pager.render({ page: data.currentPage, total: data.totalPages }, data.url) }}
  </section>

{% endblock %}
